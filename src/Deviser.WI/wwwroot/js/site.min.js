var App=function(){var e,t=!1,a=!1,n=!1,o=!1,i=[],r="../assets/",s="global/img/",l="global/plugins/",c="global/css/",d={blue:"#89C4F4",red:"#F3565D",green:"#1bbc9b",purple:"#9b59b6",grey:"#95a5a6",yellow:"#F8CB00"},u=function(){"rtl"===$("body").css("direction")&&(t=!0),a=!!navigator.userAgent.match(/MSIE 8.0/),n=!!navigator.userAgent.match(/MSIE 9.0/),o=!!navigator.userAgent.match(/MSIE 10.0/),o&&$("html").addClass("ie10"),(o||n||a)&&$("html").addClass("ie")},p=function(){for(var e=0;e<i.length;e++){var t=i[e];t.call()}},h=function(){var e;if(a){var t;$(window).resize(function(){t!=document.documentElement.clientHeight&&(e&&clearTimeout(e),e=setTimeout(function(){p()},50),t=document.documentElement.clientHeight)})}else $(window).resize(function(){e&&clearTimeout(e),e=setTimeout(function(){p()},50)})},g=function(){$("body").on("click",".portlet > .portlet-title > .tools > a.remove",function(e){e.preventDefault();var t=$(this).closest(".portlet");$("body").hasClass("page-portlet-fullscreen")&&$("body").removeClass("page-portlet-fullscreen"),t.find(".portlet-title .fullscreen").tooltip("destroy"),t.find(".portlet-title > .tools > .reload").tooltip("destroy"),t.find(".portlet-title > .tools > .remove").tooltip("destroy"),t.find(".portlet-title > .tools > .config").tooltip("destroy"),t.find(".portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip("destroy"),t.remove()}),$("body").on("click",".portlet > .portlet-title .fullscreen",function(e){e.preventDefault();var t=$(this).closest(".portlet");if(t.hasClass("portlet-fullscreen"))$(this).removeClass("on"),t.removeClass("portlet-fullscreen"),$("body").removeClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height","auto");else{var a=App.getViewPort().height-t.children(".portlet-title").outerHeight()-parseInt(t.children(".portlet-body").css("padding-top"))-parseInt(t.children(".portlet-body").css("padding-bottom"));$(this).addClass("on"),t.addClass("portlet-fullscreen"),$("body").addClass("page-portlet-fullscreen"),t.children(".portlet-body").css("height",a)}}),$("body").on("click",".portlet > .portlet-title > .tools > a.reload",function(e){e.preventDefault();var t=$(this).closest(".portlet").children(".portlet-body"),a=$(this).attr("data-url"),n=$(this).attr("data-error-display");a?(App.blockUI({target:t,animate:!0,overlayColor:"none"}),$.ajax({type:"GET",cache:!1,url:a,dataType:"html",success:function(e){App.unblockUI(t),t.html(e),App.initAjax()},error:function(e,a,o){App.unblockUI(t);var i="Error on reloading the content. Please check your connection and try again.";"toastr"==n&&toastr?toastr.error(i):"notific8"==n&&$.notific8?($.notific8("zindex",11500),$.notific8(i,{theme:"ruby",life:3e3})):alert(i)}})):(App.blockUI({target:t,animate:!0,overlayColor:"none"}),window.setTimeout(function(){App.unblockUI(t)},1e3))}),$('.portlet .portlet-title a.reload[data-load="true"]').click(),$("body").on("click",".portlet > .portlet-title > .tools > .collapse, .portlet .portlet-title > .tools > .expand",function(e){e.preventDefault();var t=$(this).closest(".portlet").children(".portlet-body");$(this).hasClass("collapse")?($(this).removeClass("collapse").addClass("expand"),t.slideUp(200)):($(this).removeClass("expand").addClass("collapse"),t.slideDown(200))})},f=function(){if($().uniform){var e=$("input[type=checkbox]:not(.toggle, .md-check, .md-radiobtn, .make-switch, .icheck), input[type=radio]:not(.toggle, .md-check, .md-radiobtn, .star, .make-switch, .icheck)");e.size()>0&&e.each(function(){0===$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())})}},m=function(){if($("body").on("click",".md-checkbox > label, .md-radio > label",function(){var e=$(this),t=$(this).children("span:first-child");t.addClass("inc");var a=t.clone(!0);t.before(a),$("."+t.attr("class")+":last",e).remove()}),$("body").hasClass("page-md")){var e,t,a,n,o;$("body").on("click","a.btn, button.btn, input.btn, label.btn",function(i){e=$(this),0==e.find(".md-click-circle").length&&e.prepend("<span class='md-click-circle'></span>"),t=e.find(".md-click-circle"),t.removeClass("md-click-animate"),t.height()||t.width()||(a=Math.max(e.outerWidth(),e.outerHeight()),t.css({height:a,width:a})),n=i.pageX-e.offset().left-t.width()/2,o=i.pageY-e.offset().top-t.height()/2,t.css({top:o+"px",left:n+"px"}).addClass("md-click-animate"),setTimeout(function(){t.remove()},1e3)})}var i=function(e){""!=e.val()?e.addClass("edited"):e.removeClass("edited")};$("body").on("keydown",".form-md-floating-label .form-control",function(e){i($(this))}),$("body").on("blur",".form-md-floating-label .form-control",function(e){i($(this))}),$(".form-md-floating-label .form-control").each(function(){$(this).val().length>0&&$(this).addClass("edited")})},v=function(){$().iCheck&&$(".icheck").each(function(){var e=$(this).attr("data-checkbox")?$(this).attr("data-checkbox"):"icheckbox_minimal-grey",t=$(this).attr("data-radio")?$(this).attr("data-radio"):"iradio_minimal-grey";$(this).iCheck(e.indexOf("_line")>-1||t.indexOf("_line")>-1?{checkboxClass:e,radioClass:t,insert:'<div class="icheck_line-icon"></div>'+$(this).attr("data-label")}:{checkboxClass:e,radioClass:t})})},b=function(){$().bootstrapSwitch&&$(".make-switch").bootstrapSwitch()},y=function(){$().confirmation&&$("[data-toggle=confirmation]").confirmation({container:"body",btnOkClass:"btn btn-sm btn-success",btnCancelClass:"btn btn-sm btn-danger"})},C=function(){$("body").on("shown.bs.collapse",".accordion.scrollable",function(e){App.scrollTo($(e.target))})},S=function(){if(location.hash){var e=encodeURI(location.hash.substr(1));$('a[href="#'+e+'"]').parents(".tab-pane:hidden").each(function(){var e=$(this).attr("id");$('a[href="#'+e+'"]').click()}),$('a[href="#'+e+'"]').click()}$().tabdrop&&$(".tabbable-tabdrop .nav-pills, .tabbable-tabdrop .nav-tabs").tabdrop({text:'<i class="fa fa-ellipsis-v"></i>&nbsp;<i class="fa fa-angle-down"></i>'})},w=function(){$("body").on("hide.bs.modal",function(){$(".modal:visible").size()>1&&$("html").hasClass("modal-open")===!1?$("html").addClass("modal-open"):$(".modal:visible").size()<=1&&$("html").removeClass("modal-open")}),$("body").on("show.bs.modal",".modal",function(){$(this).hasClass("modal-scroll")&&$("body").addClass("modal-open-noscroll")}),$("body").on("hide.bs.modal",".modal",function(){$("body").removeClass("modal-open-noscroll")}),$("body").on("hidden.bs.modal",".modal:not(.modal-cached)",function(){$(this).removeData("bs.modal")})},k=function(){$(".tooltips").tooltip(),$(".portlet > .portlet-title .fullscreen").tooltip({container:"body",title:"Fullscreen"}),$(".portlet > .portlet-title > .tools > .reload").tooltip({container:"body",title:"Reload"}),$(".portlet > .portlet-title > .tools > .remove").tooltip({container:"body",title:"Remove"}),$(".portlet > .portlet-title > .tools > .config").tooltip({container:"body",title:"Settings"}),$(".portlet > .portlet-title > .tools > .collapse, .portlet > .portlet-title > .tools > .expand").tooltip({container:"body",title:"Collapse/Expand"})},x=function(){$("body").on("click",".dropdown-menu.hold-on-click",function(e){e.stopPropagation()})},_=function(){$("body").on("click",'[data-close="alert"]',function(e){$(this).parent(".alert").hide(),$(this).closest(".note").hide(),e.preventDefault()}),$("body").on("click",'[data-close="note"]',function(e){$(this).closest(".note").hide(),e.preventDefault()}),$("body").on("click",'[data-remove="note"]',function(e){$(this).closest(".note").remove(),e.preventDefault()})},A=function(){$('[data-hover="dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")})},L=function(){"function"==typeof autosize&&autosize(document.querySelector("textarea.autosizeme"))},T=function(){$(".popovers").popover(),$(document).on("click.bs.popover.data-api",function(t){e&&e.popover("hide")})},R=function(){App.initSlimScroll(".scroller")},M=function(){jQuery.fancybox&&$(".fancybox-button").size()>0&&$(".fancybox-button").fancybox({groupAttr:"data-rel",prevEffect:"none",nextEffect:"none",closeBtn:!0,helpers:{title:{type:"inside"}}})},P=function(){$().counterUp&&$("[data-counter='counterup']").counterUp({delay:10,time:1e3})},I=function(){(a||n)&&$("input[placeholder]:not(.placeholder-no-fix), textarea[placeholder]:not(.placeholder-no-fix)").each(function(){var e=$(this);""===e.val()&&""!==e.attr("placeholder")&&e.addClass("placeholder").val(e.attr("placeholder")),e.focus(function(){e.val()==e.attr("placeholder")&&e.val("")}),e.blur(function(){(""===e.val()||e.val()==e.attr("placeholder"))&&e.val(e.attr("placeholder"))})})},E=function(){$().select2&&($.fn.select2.defaults.set("theme","bootstrap"),$(".select2me").select2({placeholder:"Select",width:"auto",allowClear:!0}))},D=function(){$("[data-auto-height]").each(function(){var e=$(this),t=$("[data-height]",e),a=0,n=e.attr("data-mode"),o=parseInt(e.attr("data-offset")?e.attr("data-offset"):0);t.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",""):$(this).css("min-height","");var e="base-height"==n?$(this).outerHeight():$(this).outerHeight(!0);e>a&&(a=e)}),a+=o,t.each(function(){"height"==$(this).attr("data-height")?$(this).css("height",a):$(this).css("min-height",a)}),e.attr("data-related")&&$(e.attr("data-related")).css("height",e.height())})};return{init:function(){u(),h(),m(),f(),v(),b(),R(),M(),E(),g(),_(),x(),S(),k(),T(),C(),w(),y(),L(),P(),this.addResizeHandler(D),I()},initAjax:function(){f(),v(),b(),A(),R(),E(),M(),x(),k(),T(),C(),y()},initComponents:function(){this.initAjax()},setLastPopedPopover:function(t){e=t},addResizeHandler:function(e){i.push(e)},runResizeHandlers:function(){p()},scrollTo:function(e,t){var a=e&&e.size()>0?e.offset().top:0;e&&($("body").hasClass("page-header-fixed")?a-=$(".page-header").height():$("body").hasClass("page-header-top-fixed")?a-=$(".page-header-top").height():$("body").hasClass("page-header-menu-fixed")&&(a-=$(".page-header-menu").height()),a+=t?t:-1*e.height()),$("html,body").animate({scrollTop:a},"slow")},initSlimScroll:function(e){$(e).each(function(){if(!$(this).attr("data-initialized")){var e;e=$(this).attr("data-height")?$(this).attr("data-height"):$(this).css("height"),$(this).slimScroll({allowPageScroll:!0,size:"7px",color:$(this).attr("data-handle-color")?$(this).attr("data-handle-color"):"#bbb",wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",railColor:$(this).attr("data-rail-color")?$(this).attr("data-rail-color"):"#eaeaea",position:t?"left":"right",height:e,alwaysVisible:"1"==$(this).attr("data-always-visible")?!0:!1,railVisible:"1"==$(this).attr("data-rail-visible")?!0:!1,disableFadeOut:!0}),$(this).attr("data-initialized","1")}})},destroySlimScroll:function(e){$(e).each(function(){if("1"===$(this).attr("data-initialized")){$(this).removeAttr("data-initialized"),$(this).removeAttr("style");var e={};$(this).attr("data-handle-color")&&(e["data-handle-color"]=$(this).attr("data-handle-color")),$(this).attr("data-wrapper-class")&&(e["data-wrapper-class"]=$(this).attr("data-wrapper-class")),$(this).attr("data-rail-color")&&(e["data-rail-color"]=$(this).attr("data-rail-color")),$(this).attr("data-always-visible")&&(e["data-always-visible"]=$(this).attr("data-always-visible")),$(this).attr("data-rail-visible")&&(e["data-rail-visible"]=$(this).attr("data-rail-visible")),$(this).slimScroll({wrapperClass:$(this).attr("data-wrapper-class")?$(this).attr("data-wrapper-class"):"slimScrollDiv",destroy:!0});var t=$(this);$.each(e,function(e,a){t.attr(e,a)})}})},scrollTop:function(){App.scrollTo()},blockUI:function(e){e=$.extend(!0,{},e);var t="";if(t=e.animate?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><div class="block-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>':e.iconOnly?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""></div>':e.textOnly?'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><span>&nbsp;&nbsp;'+(e.message?e.message:"LOADING...")+"</span></div>":'<div class="loading-message '+(e.boxed?"loading-message-boxed":"")+'"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif" align=""><span>&nbsp;&nbsp;'+(e.message?e.message:"LOADING...")+"</span></div>",e.target){var a=$(e.target);a.height()<=$(window).height()&&(e.cenrerY=!0),a.block({message:t,baseZ:e.zIndex?e.zIndex:1e3,centerY:void 0!==e.cenrerY?e.cenrerY:!1,css:{top:"10%",border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:e.overlayColor?e.overlayColor:"#555",opacity:e.boxed?.05:.1,cursor:"wait"}})}else $.blockUI({message:t,baseZ:e.zIndex?e.zIndex:1e3,css:{border:"0",padding:"0",backgroundColor:"none"},overlayCSS:{backgroundColor:e.overlayColor?e.overlayColor:"#555",opacity:e.boxed?.05:.1,cursor:"wait"}})},unblockUI:function(e){e?$(e).unblock({onUnblock:function(){$(e).css("position",""),$(e).css("zoom","")}}):$.unblockUI()},startPageLoading:function(e){e&&e.animate?($(".page-spinner-bar").remove(),$("body").append('<div class="page-spinner-bar"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>')):($(".page-loading").remove(),$("body").append('<div class="page-loading"><img src="'+this.getGlobalImgPath()+'loading-spinner-grey.gif"/>&nbsp;&nbsp;<span>'+(e&&e.message?e.message:"Loading...")+"</span></div>"))},stopPageLoading:function(){$(".page-loading, .page-spinner-bar").remove()},alert:function(e){e=$.extend(!0,{container:"",place:"append",type:"success",message:"",close:!0,reset:!0,focus:!0,closeInSeconds:0,icon:""},e);var t=App.getUniqueID("App_alert"),a='<div id="'+t+'" class="custom-alerts alert alert-'+e.type+' fade in">'+(e.close?'<button type="button" class="close" data-dismiss="alert" aria-hidden="true"></button>':"")+(""!==e.icon?'<i class="fa-lg fa fa-'+e.icon+'"></i>  ':"")+e.message+"</div>";return e.reset&&$(".custom-alerts").remove(),e.container?"append"==e.place?$(e.container).append(a):$(e.container).prepend(a):1===$(".page-fixed-main-content").size()?$(".page-fixed-main-content").prepend(a):($("body").hasClass("page-container-bg-solid")||$("body").hasClass("page-content-white"))&&0===$(".page-head").size()?$(".page-title").after(a):$(".page-bar").size()>0?$(".page-bar").after(a):$(".page-breadcrumb, .breadcrumbs").after(a),e.focus&&App.scrollTo($("#"+t)),e.closeInSeconds>0&&setTimeout(function(){$("#"+t).remove()},1e3*e.closeInSeconds),t},initUniform:function(e){e?$(e).each(function(){0===$(this).parents(".checker").size()&&($(this).show(),$(this).uniform())}):f()},updateUniform:function(e){$.uniform.update(e)},initFancybox:function(){M()},getActualVal:function(e){return e=$(e),e.val()===e.attr("placeholder")?"":e.val()},getURLParameter:function(e){var t,a,n=window.location.search.substring(1),o=n.split("&");for(t=0;t<o.length;t++)if(a=o[t].split("="),a[0]==e)return unescape(a[1]);return null},isTouchDevice:function(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}},getViewPort:function(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}},getUniqueID:function(e){return"prefix_"+Math.floor(Math.random()*(new Date).getTime())},isIE8:function(){return a},isIE9:function(){return n},isRTL:function(){return t},isAngularJsApp:function(){return"undefined"==typeof angular?!1:!0},getAssetsPath:function(){return r},setAssetsPath:function(e){r=e},setGlobalImgPath:function(e){s=e},getGlobalImgPath:function(){return r+s},setGlobalPluginsPath:function(e){l=e},getGlobalPluginsPath:function(){return r+l},getGlobalCssPath:function(){return r+c},getBrandColor:function(e){return d[e]?d[e]:""},getResponsiveBreakpoint:function(e){var t={xs:480,sm:768,md:992,lg:1200};return t[e]?t[e]:0}}}();jQuery(document).ready(function(){App.init()});var Dashboard=function(){return{initJQVMAP:function(){if(jQuery().vectorMap){var e=function(e){jQuery(".vmaps").hide(),jQuery("#vmap_"+e).show()},t=function(e){var t={map:"world_en",backgroundColor:null,borderColor:"#333333",borderOpacity:.5,borderWidth:1,color:"#c6c6c6",enableZoom:!0,hoverColor:"#c9dfaf",hoverOpacity:null,values:sample_data,normalizeFunction:"linear",scaleColors:["#b6da93","#909cae"],selectedColor:"#c9dfaf",selectedRegion:null,showTooltip:!0,onLabelShow:function(e,t,a){},onRegionOver:function(e,t){"ca"==t&&e.preventDefault()},onRegionClick:function(e,t,a){var n='You clicked "'+a+'" which has the code: '+t.toUpperCase();alert(n)}};t.map=e+"_en";var a=jQuery("#vmap_"+e);a&&(a.width(a.parent().parent().width()),a.show(),a.vectorMap(t),a.hide())};t("world"),t("usa"),t("europe"),t("russia"),t("germany"),e("world"),jQuery("#regional_stat_world").click(function(){e("world")}),jQuery("#regional_stat_usa").click(function(){e("usa")}),jQuery("#regional_stat_europe").click(function(){e("europe")}),jQuery("#regional_stat_russia").click(function(){e("russia")}),jQuery("#regional_stat_germany").click(function(){e("germany")}),$("#region_statistics_loading").hide(),$("#region_statistics_content").show(),App.addResizeHandler(function(){jQuery(".vmaps").each(function(){var e=jQuery(this);e.width(e.parent().width())})})}},initCalendar:function(){if(jQuery().fullCalendar){var e=new Date,t=e.getDate(),a=e.getMonth(),n=e.getFullYear(),o={};$("#calendar").width()<=400?($("#calendar").addClass("mobile"),o={left:"title, prev, next",center:"",right:"today,month,agendaWeek,agendaDay"}):($("#calendar").removeClass("mobile"),o=App.isRTL()?{right:"title",center:"",left:"prev,next,today,month,agendaWeek,agendaDay"}:{left:"title",center:"",right:"prev,next,today,month,agendaWeek,agendaDay"}),$("#calendar").fullCalendar("destroy"),$("#calendar").fullCalendar({disableDragging:!1,header:o,editable:!0,events:[{title:"All Day",start:new Date(n,a,1),backgroundColor:App.getBrandColor("yellow")},{title:"Long Event",start:new Date(n,a,t-5),end:new Date(n,a,t-2),backgroundColor:App.getBrandColor("blue")},{title:"Repeating Event",start:new Date(n,a,t-3,16,0),allDay:!1,backgroundColor:App.getBrandColor("red")},{title:"Repeating Event",start:new Date(n,a,t+6,16,0),allDay:!1,backgroundColor:App.getBrandColor("green")},{title:"Meeting",start:new Date(n,a,t+9,10,30),allDay:!1},{title:"Lunch",start:new Date(n,a,t,14,0),end:new Date(n,a,t,14,0),backgroundColor:App.getBrandColor("grey"),allDay:!1},{title:"Birthday",start:new Date(n,a,t+1,19,0),end:new Date(n,a,t+1,22,30),backgroundColor:App.getBrandColor("purple"),allDay:!1},{title:"Click for Google",start:new Date(n,a,28),end:new Date(n,a,29),backgroundColor:App.getBrandColor("yellow"),url:"http://google.com/"}]})}},initCharts:function(){function e(e,t,a,n){$('<div id="tooltip" class="chart-tooltip">'+n+"</div>").css({position:"absolute",display:"none",top:t-40,left:e-40,border:"0px solid #ccc",padding:"2px 6px","background-color":"#fff"}).appendTo("body").fadeIn(200)}if(jQuery.plot){var t=[["02/2013",1500],["03/2013",2500],["04/2013",1700],["05/2013",800],["06/2013",1500],["07/2013",2350],["08/2013",1500],["09/2013",1300],["10/2013",4600]];if(0!=$("#site_statistics").size()){$("#site_statistics_loading").hide(),$("#site_statistics_content").show();var a=($.plot($("#site_statistics"),[{data:t,lines:{fill:.6,lineWidth:0},color:["#f89f9f"]},{data:t,points:{show:!0,fill:!0,radius:5,fillColor:"#f89f9f",lineWidth:3},color:"#fff",shadowSize:0}],{xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},yaxis:{ticks:5,tickDecimals:0,tickColor:"#eee",font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderColor:"#eee",borderWidth:1}}),null);$("#site_statistics").bind("plothover",function(t,n,o){if($("#x").text(n.x.toFixed(2)),$("#y").text(n.y.toFixed(2)),o){if(a!=o.dataIndex){a=o.dataIndex,$("#tooltip").remove();{o.datapoint[0].toFixed(2),o.datapoint[1].toFixed(2)}e(o.pageX,o.pageY,o.datapoint[0],o.datapoint[1]+" visits")}}else $("#tooltip").remove(),a=null})}if(0!=$("#site_activities").size()){var n=null;$("#site_activities_loading").hide(),$("#site_activities_content").show();{var o=[["DEC",300],["JAN",600],["FEB",1100],["MAR",1200],["APR",860],["MAY",1200],["JUN",1450],["JUL",1800],["AUG",1200],["SEP",600]];$.plot($("#site_activities"),[{data:o,lines:{fill:.2,lineWidth:0},color:["#BAD9F5"]},{data:o,points:{show:!0,fill:!0,radius:4,fillColor:"#9ACAE6",lineWidth:2},color:"#9ACAE6",shadowSize:1},{data:o,lines:{show:!0,fill:!1,lineWidth:3},color:"#9ACAE6",shadowSize:0}],{xaxis:{tickLength:0,tickDecimals:0,mode:"categories",min:0,font:{lineHeight:18,style:"normal",variant:"small-caps",color:"#6F7B8A"}},yaxis:{ticks:5,tickDecimals:0,tickColor:"#eee",font:{lineHeight:14,style:"normal",variant:"small-caps",color:"#6F7B8A"}},grid:{hoverable:!0,clickable:!0,tickColor:"#eee",borderColor:"#eee",borderWidth:1}})}$("#site_activities").bind("plothover",function(t,a,o){if($("#x").text(a.x.toFixed(2)),$("#y").text(a.y.toFixed(2)),o&&n!=o.dataIndex){n=o.dataIndex,$("#tooltip").remove();{o.datapoint[0].toFixed(2),o.datapoint[1].toFixed(2)}e(o.pageX,o.pageY,o.datapoint[0],o.datapoint[1]+"M$")}}),$("#site_activities").bind("mouseleave",function(){$("#tooltip").remove()})}}},initEasyPieCharts:function(){jQuery().easyPieChart&&($(".easy-pie-chart .number.transactions").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getBrandColor("yellow")}),$(".easy-pie-chart .number.visits").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getBrandColor("green")}),$(".easy-pie-chart .number.bounce").easyPieChart({animate:1e3,size:75,lineWidth:3,barColor:App.getBrandColor("red")}),$(".easy-pie-chart-reload").click(function(){$(".easy-pie-chart .number").each(function(){var e=Math.floor(100*Math.random());$(this).data("easyPieChart").update(e),$("span",this).text(e)})}))},initSparklineCharts:function(){jQuery().sparkline&&($("#sparkline_bar").sparkline([8,9,10,11,10,10,12,10,10,11,9,12,11,10,9,11,13,13,12],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#35aa47",negBarColor:"#e02222"}),$("#sparkline_bar2").sparkline([9,11,12,13,12,13,10,14,13,11,11,12,11,11,10,12,11,10],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#ffb848",negBarColor:"#e02222"}),$("#sparkline_bar5").sparkline([8,9,10,11,10,10,12,10,10,11,9,12,11,10,9,11,13,13,12],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#35aa47",negBarColor:"#e02222"}),$("#sparkline_bar6").sparkline([9,11,12,13,12,13,10,14,13,11,11,12,11,11,10,12,11,10],{type:"bar",width:"100",barWidth:5,height:"55",barColor:"#ffb848",negBarColor:"#e02222"}),$("#sparkline_line").sparkline([9,10,9,10,10,11,12,10,10,11,11,12,11,10,12,11,10,12],{type:"line",width:"100",height:"55",lineColor:"#ffb848"}))},initMorisCharts:function(){Morris.EventEmitter&&$("#sales_statistics").size()>0&&(dashboardMainChart=Morris.Area({element:"sales_statistics",padding:0,behaveLikeLine:!1,gridEnabled:!1,gridLineColor:!1,axes:!1,fillOpacity:1,data:[{period:"2011 Q1",sales:1400,profit:400},{period:"2011 Q2",sales:1100,profit:600},{period:"2011 Q3",sales:1600,profit:500},{period:"2011 Q4",sales:1200,profit:400},{period:"2012 Q1",sales:1550,profit:800}],lineColors:["#399a8c","#92e9dc"],xkey:"period",ykeys:["sales","profit"],labels:["Sales","Profit"],pointSize:0,lineWidth:0,hideHover:"auto",resize:!0}))},initChat:function(){var e=$("#chats"),t=$(".chats",e),a=$(".chat-form",e),n=$("input",a),o=$(".btn",a),i=function(a){a.preventDefault();var o=n.val();if(0!=o.length){var i=new Date,r=i.getHours()+":"+i.getMinutes(),s="";s+='<li class="out">',s+='<img class="avatar" alt="" src="'+Layout.getLayoutImgPath()+'avatar1.jpg"/>',s+='<div class="message">',s+='<span class="arrow"></span>',s+='<a href="#" class="name">Bob Nilson</a>&nbsp;',s+='<span class="datetime">at '+r+"</span>",s+='<span class="body">',s+=o,s+="</span>",s+="</div>",s+="</li>";{t.append(s)}n.val("");var l=function(){var t=0;return e.find("li.out, li.in").each(function(){t+=$(this).outerHeight()}),t};e.find(".scroller").slimScroll({scrollTo:l()})}};$("body").on("click",".message .name",function(e){e.preventDefault();var t=$(this).text();n.val("@"+t+":"),App.scrollTo(n)}),o.click(i),n.keypress(function(e){return 13==e.which?(i(e),!1):void 0})},initDashboardDaterange:function(){jQuery().daterangepicker&&($("#dashboard-report-range").daterangepicker({ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract("days",1),moment().subtract("days",1)],"Last 7 Days":[moment().subtract("days",6),moment()],"Last 30 Days":[moment().subtract("days",29),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract("month",1).startOf("month"),moment().subtract("month",1).endOf("month")]},locale:{format:"MM/DD/YYYY",separator:" - ",applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",customRangeLabel:"Custom",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1},opens:App.isRTL()?"right":"left"},function(e,t,a){$("#dashboard-report-range span").html(e.format("MMMM D, YYYY")+" - "+t.format("MMMM D, YYYY"))}),$("#dashboard-report-range span").html(moment().subtract("days",29).format("MMMM D, YYYY")+" - "+moment().format("MMMM D, YYYY")),$("#dashboard-report-range").show())},initAmChart1:function(){if("undefined"!=typeof AmCharts&&0!==$("#dashboard_amchart_1").size()){var e=[{date:"2012-01-05",distance:480,townName:"Miami",townName2:"Miami",townSize:10,latitude:25.83,duration:501},{date:"2012-01-06",distance:386,townName:"Tallahassee",townSize:7,latitude:30.46,duration:443},{date:"2012-01-07",distance:348,townName:"New Orleans",townSize:10,latitude:29.94,duration:405},{date:"2012-01-08",distance:238,townName:"Houston",townName2:"Houston",townSize:16,latitude:29.76,duration:309},{date:"2012-01-09",distance:218,townName:"Dalas",townSize:17,latitude:32.8,duration:287},{date:"2012-01-10",distance:349,townName:"Oklahoma City",townSize:11,latitude:35.49,duration:485},{date:"2012-01-11",distance:603,townName:"Kansas City",townSize:10,latitude:39.1,duration:890},{date:"2012-01-12",distance:534,townName:"Denver",townName2:"Denver",townSize:18,latitude:39.74,duration:810},{date:"2012-01-13",townName:"Salt Lake City",townSize:12,distance:425,duration:670,latitude:40.75,alpha:.4},{date:"2012-01-14",latitude:36.1,duration:470,townName:"Las Vegas",townName2:"Las Vegas",bulletClass:"lastBullet"},{date:"2012-01-15"}];AmCharts.makeChart("dashboard_amchart_1",{type:"serial",fontSize:12,fontFamily:"Open Sans",dataDateFormat:"YYYY-MM-DD",dataProvider:e,addClassNames:!0,startDuration:1,color:"#6c7b88",marginLeft:0,categoryField:"date",categoryAxis:{parseDates:!0,minPeriod:"DD",autoGridCount:!1,gridCount:50,gridAlpha:.1,gridColor:"#FFFFFF",axisColor:"#555555",dateFormats:[{period:"DD",format:"DD"},{period:"WW",format:"MMM DD"},{period:"MM",format:"MMM"},{period:"YYYY",format:"YYYY"}]},valueAxes:[{id:"a1",title:"distance",gridAlpha:0,axisAlpha:0},{id:"a2",position:"right",gridAlpha:0,axisAlpha:0,labelsEnabled:!1},{id:"a3",title:"duration",position:"right",gridAlpha:0,axisAlpha:0,inside:!0,duration:"mm",durationUnits:{DD:"d. ",hh:"h ",mm:"min",ss:""}}],graphs:[{id:"g1",valueField:"distance",title:"distance",type:"column",fillAlphas:.7,valueAxis:"a1",balloonText:"[[value]] miles",legendValueText:"[[value]] mi",legendPeriodValueText:"total: [[value.sum]] mi",lineColor:"#08a3cc",alphaField:"alpha"},{id:"g2",valueField:"latitude",classNameField:"bulletClass",title:"latitude/city",type:"line",valueAxis:"a2",lineColor:"#786c56",lineThickness:1,legendValueText:"[[description]]/[[value]]",descriptionField:"townName",bullet:"round",bulletSizeField:"townSize",bulletBorderColor:"#02617a",bulletBorderAlpha:1,bulletBorderThickness:2,bulletColor:"#89c4f4",labelText:"[[townName2]]",labelPosition:"right",balloonText:"latitude:[[value]]",showBalloon:!0,animationPlayed:!0},{id:"g3",title:"duration",valueField:"duration",type:"line",valueAxis:"a3",lineAlpha:.8,lineColor:"#e26a6a",balloonText:"[[value]]",lineThickness:1,legendValueText:"[[value]]",bullet:"square",bulletBorderColor:"#e26a6a",bulletBorderThickness:1,bulletBorderAlpha:.8,dashLengthField:"dashLength",animationPlayed:!0}],chartCursor:{zoomable:!1,categoryBalloonDateFormat:"DD",cursorAlpha:0,categoryBalloonColor:"#e26a6a",categoryBalloonAlpha:.8,valueBalloonsEnabled:!1},legend:{bulletType:"round",equalWidths:!1,valueWidth:120,useGraphSettings:!0,color:"#6c7b88"}})}},initAmChart2:function(){if("undefined"!=typeof AmCharts&&0!==$("#dashboard_amchart_2").size()){var e="M9,0C4.029,0,0,4.029,0,9s4.029,9,9,9s9-4.029,9-9S13.971,0,9,0z M9,15.93 c-3.83,0-6.93-3.1-6.93-6.93S5.17,2.07,9,2.07s6.93,3.1,6.93,6.93S12.83,15.93,9,15.93 M12.5,9c0,1.933-1.567,3.5-3.5,3.5S5.5,10.933,5.5,9S7.067,5.5,9,5.5 S12.5,7.067,12.5,9z",t="M19.671,8.11l-2.777,2.777l-3.837-0.861c0.362-0.505,0.916-1.683,0.464-2.135c-0.518-0.517-1.979,0.278-2.305,0.604l-0.913,0.913L7.614,8.804l-2.021,2.021l2.232,1.061l-0.082,0.082l1.701,1.701l0.688-0.687l3.164,1.504L9.571,18.21H6.413l-1.137,1.138l3.6,0.948l1.83,1.83l0.947,3.598l1.137-1.137V21.43l3.725-3.725l1.504,3.164l-0.687,0.687l1.702,1.701l0.081-0.081l1.062,2.231l2.02-2.02l-0.604-2.689l0.912-0.912c0.326-0.326,1.121-1.789,0.604-2.306c-0.452-0.452-1.63,0.101-2.135,0.464l-0.861-3.838l2.777-2.777c0.947-0.947,3.599-4.862,2.62-5.839C24.533,4.512,20.618,7.163,19.671,8.11z";AmCharts.makeChart("dashboard_amchart_2",{type:"map",theme:"light",pathToImages:"../assets/global/plugins/amcharts/ammap/images/",dataProvider:{map:"worldLow",linkToObject:"london",images:[{id:"london",color:"#009dc7",svgPath:e,title:"London",latitude:51.5002,longitude:-.1262,scale:1.5,zoomLevel:2.74,zoomLongitude:-20.1341,zoomLatitude:49.1712,lines:[{latitudes:[51.5002,50.4422],longitudes:[-.1262,30.5367]},{latitudes:[51.5002,46.948],longitudes:[-.1262,7.4481]},{latitudes:[51.5002,59.3328],longitudes:[-.1262,18.0645]},{latitudes:[51.5002,40.4167],longitudes:[-.1262,-3.7033]},{latitudes:[51.5002,46.0514],longitudes:[-.1262,14.506]},{latitudes:[51.5002,48.2116],longitudes:[-.1262,17.1547]},{latitudes:[51.5002,44.8048],longitudes:[-.1262,20.4781]},{latitudes:[51.5002,55.7558],longitudes:[-.1262,37.6176]},{latitudes:[51.5002,38.7072],longitudes:[-.1262,-9.1355]},{latitudes:[51.5002,54.6896],longitudes:[-.1262,25.2799]},{latitudes:[51.5002,64.1353],longitudes:[-.1262,-21.8952]},{latitudes:[51.5002,40.43],longitudes:[-.1262,-74]}],images:[{label:"Flights from London",svgPath:t,left:100,top:45,labelShiftY:5,color:"#d93d5e",labelColor:"#d93d5e",labelRollOverColor:"#d93d5e",labelFontSize:20},{label:"show flights from Vilnius",left:106,top:70,labelColor:"#6c7b88",labelRollOverColor:"#d93d5e",labelFontSize:11,linkToObject:"vilnius"}]},{id:"vilnius",color:"#009dc7",svgPath:e,title:"Vilnius",latitude:54.6896,longitude:25.2799,scale:1.5,zoomLevel:4.92,zoomLongitude:15.4492,zoomLatitude:50.2631,lines:[{latitudes:[54.6896,50.8371],longitudes:[25.2799,4.3676]},{latitudes:[54.6896,59.9138],longitudes:[25.2799,10.7387]},{latitudes:[54.6896,40.4167],longitudes:[25.2799,-3.7033]},{latitudes:[54.6896,50.0878],longitudes:[25.2799,14.4205]},{latitudes:[54.6896,48.2116],longitudes:[25.2799,17.1547]},{latitudes:[54.6896,44.8048],longitudes:[25.2799,20.4781]},{latitudes:[54.6896,55.7558],longitudes:[25.2799,37.6176]},{latitudes:[54.6896,37.9792],longitudes:[25.2799,23.7166]},{latitudes:[54.6896,54.6896],longitudes:[25.2799,25.2799]},{latitudes:[54.6896,51.5002],longitudes:[25.2799,-.1262]},{latitudes:[54.6896,53.3441],longitudes:[25.2799,-6.2675]}],images:[{label:"Flights from Vilnius",svgPath:t,left:100,top:45,labelShiftY:5,color:"#d93d5e",labelColor:"#d93d5e",labelRollOverColor:"#d93d5e",labelFontSize:20},{label:"show flights from London",
left:106,top:70,labelColor:"#009dc7",labelRollOverColor:"#d93d5e",labelFontSize:11,linkToObject:"london"}]},{svgPath:e,title:"Brussels",latitude:50.8371,longitude:4.3676},{svgPath:e,title:"Prague",latitude:50.0878,longitude:14.4205},{svgPath:e,title:"Athens",latitude:37.9792,longitude:23.7166},{svgPath:e,title:"Reykjavik",latitude:64.1353,longitude:-21.8952},{svgPath:e,title:"Dublin",latitude:53.3441,longitude:-6.2675},{svgPath:e,title:"Oslo",latitude:59.9138,longitude:10.7387},{svgPath:e,title:"Lisbon",latitude:38.7072,longitude:-9.1355},{svgPath:e,title:"Moscow",latitude:55.7558,longitude:37.6176},{svgPath:e,title:"Belgrade",latitude:44.8048,longitude:20.4781},{svgPath:e,title:"Bratislava",latitude:48.2116,longitude:17.1547},{svgPath:e,title:"Ljubljana",latitude:46.0514,longitude:14.506},{svgPath:e,title:"Madrid",latitude:40.4167,longitude:-3.7033},{svgPath:e,title:"Stockholm",latitude:59.3328,longitude:18.0645},{svgPath:e,title:"Bern",latitude:46.948,longitude:7.4481},{svgPath:e,title:"Kiev",latitude:50.4422,longitude:30.5367},{svgPath:e,title:"Paris",latitude:48.8567,longitude:2.351},{svgPath:e,title:"New York",latitude:40.43,longitude:-74}]},zoomControl:{buttonFillColor:"#dddddd"},areasSettings:{unlistedAreasColor:"#15A892"},imagesSettings:{color:"#d93d5e",rollOverColor:"#d93d5e",selectedColor:"#009dc7"},linesSettings:{color:"#d93d5e",alpha:.4},backgroundZoomsToTop:!0,linesAboveImages:!0,"export":{enabled:!0,libs:{path:"http://www.amcharts.com/lib/3/plugins/export/libs/"}}})}},initAmChart3:function(){if("undefined"!=typeof AmCharts&&0!==$("#dashboard_amchart_3").size()){AmCharts.makeChart("dashboard_amchart_3",{type:"serial",addClassNames:!0,theme:"light",path:"../assets/global/plugins/amcharts/ammap/images/",autoMargins:!1,marginLeft:30,marginRight:8,marginTop:10,marginBottom:26,balloon:{adjustBorderColor:!1,horizontalPadding:10,verticalPadding:8,color:"#ffffff"},dataProvider:[{year:2009,income:23.5,expenses:21.1},{year:2010,income:26.2,expenses:30.5},{year:2011,income:30.1,expenses:34.9},{year:2012,income:29.5,expenses:31.1},{year:2013,income:30.6,expenses:28.2},{year:2014,income:34.1,expenses:32.9,dashLengthColumn:5,alpha:.2,additional:"(projection)"}],valueAxes:[{axisAlpha:0,position:"left"}],startDuration:1,graphs:[{alphaField:"alpha",balloonText:"<span style='font-size:12px;'>[[title]] in [[category]]:<br><span style='font-size:20px;'>[[value]]</span> [[additional]]</span>",fillAlphas:1,title:"Income",type:"column",valueField:"income",dashLengthField:"dashLengthColumn"},{id:"graph2",balloonText:"<span style='font-size:12px;'>[[title]] in [[category]]:<br><span style='font-size:20px;'>[[value]]</span> [[additional]]</span>",bullet:"round",lineThickness:3,bulletSize:7,bulletBorderAlpha:1,bulletColor:"#FFFFFF",useLineColorForBulletBorder:!0,bulletBorderThickness:3,fillAlphas:0,lineAlpha:1,title:"Expenses",valueField:"expenses"}],categoryField:"year",categoryAxis:{gridPosition:"start",axisAlpha:0,tickLength:0},"export":{enabled:!0}})}},initAmChart4:function(){if("undefined"!=typeof AmCharts&&0!==$("#dashboard_amchart_4").size()){var e=AmCharts.makeChart("dashboard_amchart_4",{type:"pie",theme:"light",path:"../assets/global/plugins/amcharts/ammap/images/",dataProvider:[{country:"Lithuania",value:260},{country:"Ireland",value:201},{country:"Germany",value:65},{country:"Australia",value:39},{country:"UK",value:19},{country:"Latvia",value:10}],valueField:"value",titleField:"country",outlineAlpha:.4,depth3D:15,balloonText:"[[title]]<br><span style='font-size:14px'><b>[[value]]</b> ([[percents]]%)</span>",angle:30,"export":{enabled:!0}});jQuery(".chart-input").off().on("input change",function(){var t=jQuery(this).data("property"),a=e,n=Number(this.value);e.startDuration=0,"innerRadius"==t&&(n+="%"),a[t]=n,e.validateNow()})}},initWorldMapStats:function(){0!==$("#mapplic").size()&&($("#mapplic").mapplic({source:"../assets/global/plugins/mapplic/world.json",height:265,animate:!1,sidebar:!1,minimap:!1,locations:!0,deeplinking:!0,fullscreen:!1,hovertip:!0,zoombuttons:!1,clearbutton:!1,developer:!1,maxscale:2,skin:"mapplic-dark",zoom:!0}),$("#widget_sparkline_bar").sparkline([8,7,9,8.5,8,8.2,8,8.5,9,8,9],{type:"bar",width:"100",barWidth:5,height:"30",barColor:"#4db3a4",negBarColor:"#e02222"}),$("#widget_sparkline_bar2").sparkline([8,7,9,8.5,8,8.2,8,8.5,9,8,9],{type:"bar",width:"100",barWidth:5,height:"30",barColor:"#f36a5a",negBarColor:"#e02222"}),$("#widget_sparkline_bar3").sparkline([8,7,9,8.5,8,8.2,8,8.5,9,8,9],{type:"bar",width:"100",barWidth:5,height:"30",barColor:"#5b9bd1",negBarColor:"#e02222"}),$("#widget_sparkline_bar4").sparkline([8,7,9,8.5,8,8.2,8,8.5,9,8,9],{type:"bar",width:"100",barWidth:5,height:"30",barColor:"#9a7caf",negBarColor:"#e02222"}))},init:function(){this.initJQVMAP(),this.initCalendar(),this.initCharts(),this.initEasyPieCharts(),this.initSparklineCharts(),this.initChat(),this.initDashboardDaterange(),this.initMorisCharts(),this.initAmChart1(),this.initAmChart2(),this.initAmChart3(),this.initAmChart4(),this.initWorldMapStats()}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){Dashboard.init()});var Layout=function(){var e="layouts/layout/img/",t="layouts/layout/css/",a=App.getResponsiveBreakpoint("md"),n=function(){var e,t=$(".page-content"),n=$(".page-sidebar"),o=$("body");if(o.hasClass("page-footer-fixed")===!0&&o.hasClass("page-sidebar-fixed")===!1){var i=App.getViewPort().height-$(".page-footer").outerHeight()-$(".page-header").outerHeight();t.height()<i&&t.attr("style","min-height:"+i+"px")}else{if(o.hasClass("page-sidebar-fixed"))e=r(),o.hasClass("page-footer-fixed")===!1&&(e-=$(".page-footer").outerHeight());else{var s=$(".page-header").outerHeight(),l=$(".page-footer").outerHeight();e=App.getViewPort().width<a?App.getViewPort().height-s-l:n.height()+20,e+s+l<=App.getViewPort().height&&(e=App.getViewPort().height-s-l)}t.attr("style","min-height:"+e+"px")}},o=function(e,t){var n=location.hash.toLowerCase(),o=$(".page-sidebar-menu");if("click"===e||"set"===e?t=$(t):"match"===e&&o.find("li > a").each(function(){var e=$(this).attr("href").toLowerCase();return e.length>1&&n.substr(1,e.length-1)==e.substr(1)?void(t=$(this)):void 0}),t&&0!=t.size()&&"javascript:;"!==t.attr("href").toLowerCase()&&"#"!==t.attr("href").toLowerCase()){{parseInt(o.data("slide-speed")),o.data("keep-expanded")}o.hasClass("page-sidebar-menu-hover-submenu")===!1?o.find("li.nav-item.open").each(function(){var e=!1;$(this).find("li").each(function(){return $(this).find(" > a").attr("href")===t.attr("href")?void(e=!0):void 0}),e!==!0&&($(this).removeClass("open"),$(this).find("> a > .arrow.open").removeClass("open"),$(this).find("> .sub-menu").slideUp())}):o.find("li.open").removeClass("open"),o.find("li.active").removeClass("active"),o.find("li > a > .selected").remove(),t.parents("li").each(function(){$(this).addClass("active"),$(this).find("> a > span.arrow").addClass("open"),1===$(this).parent("ul.page-sidebar-menu").size()&&$(this).find("> a").append('<span class="selected"></span>'),1===$(this).children("ul.sub-menu").size()&&$(this).addClass("open")}),"click"===e&&App.getViewPort().width<a&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click()}},i=function(){$(".page-sidebar-menu").on("click","li > a.nav-toggle, li > a > span.nav-toggle",function(e){var t=$(this).closest(".nav-item").children(".nav-link");if(!(App.getViewPort().width>=a&&!$(".page-sidebar-menu").attr("data-initialized")&&$("body").hasClass("page-sidebar-closed")&&1===t.parent("li").parent(".page-sidebar-menu").size())){var o=t.next().hasClass("sub-menu");if(!(App.getViewPort().width>=a&&1===t.parents(".page-sidebar-menu-hover-submenu").size())){if(o===!1)return void(App.getViewPort().width<a&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click());var i=t.parent().parent(),r=t,s=$(".page-sidebar-menu"),l=t.next(),c=s.data("auto-scroll"),d=parseInt(s.data("slide-speed")),u=s.data("keep-expanded");u||(i.children("li.open").children("a").children(".arrow").removeClass("open"),i.children("li.open").children(".sub-menu:not(.always-open)").slideUp(d),i.children("li.open").removeClass("open"));var p=-200;l.is(":visible")?($(".arrow",r).removeClass("open"),r.parent().removeClass("open"),l.slideUp(d,function(){c===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?s.slimScroll({scrollTo:r.position().top}):App.scrollTo(r,p)),n()})):o&&($(".arrow",r).addClass("open"),r.parent().addClass("open"),l.slideDown(d,function(){c===!0&&$("body").hasClass("page-sidebar-closed")===!1&&($("body").hasClass("page-sidebar-fixed")?s.slimScroll({scrollTo:r.position().top}):App.scrollTo(r,p)),n()})),e.preventDefault()}}}),App.isAngularJsApp()&&$(".page-sidebar-menu li > a").on("click",function(e){App.getViewPort().width<a&&$(this).next().hasClass("sub-menu")===!1&&$(".page-header .responsive-toggler").click()}),$(".page-sidebar").on("click"," li > a.ajaxify",function(e){e.preventDefault(),App.scrollTop();var t=$(this).attr("href"),n=$(".page-sidebar ul"),o=($(".page-content"),$(".page-content .page-content-body"));n.children("li.active").removeClass("active"),n.children("arrow.open").removeClass("open"),$(this).parents("li").each(function(){$(this).addClass("active"),$(this).children("a > span.arrow").addClass("open")}),$(this).parents("li").addClass("active"),App.getViewPort().width<a&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),App.startPageLoading();var i=$(this);$.ajax({type:"GET",cache:!1,url:t,dataType:"html",success:function(e){0===i.parents("li.open").size()&&$(".page-sidebar-menu > li.open > a").click(),App.stopPageLoading(),o.html(e),Layout.fixContentHeight(),App.initAjax()},error:function(e,t,a){App.stopPageLoading(),o.html("<h4>Could not load the requested content.</h4>")}})}),$(".page-content").on("click",".ajaxify",function(e){e.preventDefault(),App.scrollTop();var t=$(this).attr("href"),n=($(".page-content"),$(".page-content .page-content-body"));App.startPageLoading(),App.getViewPort().width<a&&$(".page-sidebar").hasClass("in")&&$(".page-header .responsive-toggler").click(),$.ajax({type:"GET",cache:!1,url:t,dataType:"html",success:function(e){App.stopPageLoading(),n.html(e),Layout.fixContentHeight(),App.initAjax()},error:function(e,t,a){n.html("<h4>Could not load the requested content.</h4>"),App.stopPageLoading()}})}),$(document).on("click",".page-header-fixed-mobile .page-header .responsive-toggler",function(){App.scrollTop()}),l(),$(".page-sidebar").on("click",".sidebar-search .remove",function(e){e.preventDefault(),$(".sidebar-search").removeClass("open")}),$(".page-sidebar .sidebar-search").on("keypress","input.form-control",function(e){return 13==e.which?($(".sidebar-search").submit(),!1):void 0}),$(".sidebar-search .submit").on("click",function(e){e.preventDefault(),$("body").hasClass("page-sidebar-closed")&&$(".sidebar-search").hasClass("open")===!1?(1===$(".page-sidebar-fixed").size()&&$(".page-sidebar .sidebar-toggler").click(),$(".sidebar-search").addClass("open")):$(".sidebar-search").submit()}),0!==$(".sidebar-search").size()&&($(".sidebar-search .input-group").on("click",function(e){e.stopPropagation()}),$("body").on("click",function(){$(".sidebar-search").hasClass("open")&&$(".sidebar-search").removeClass("open")}))},r=function(){var e=App.getViewPort().height-$(".page-header").outerHeight(!0);return $("body").hasClass("page-footer-fixed")&&(e-=$(".page-footer").outerHeight()),e},s=function(){var e=$(".page-sidebar-menu");return App.destroySlimScroll(e),0===$(".page-sidebar-fixed").size()?void n():void(App.getViewPort().width>=a&&(e.attr("data-height",r()),App.initSlimScroll(e),n()))},l=function(){var e=$("body");e.hasClass("page-sidebar-fixed")&&$(".page-sidebar").on("mouseenter",function(){e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").removeClass("page-sidebar-menu-closed")}).on("mouseleave",function(){e.hasClass("page-sidebar-closed")&&$(this).find(".page-sidebar-menu").addClass("page-sidebar-menu-closed")})},c=function(){var e=$("body");$.cookie&&"1"===$.cookie("sidebar_closed")&&App.getViewPort().width>=a&&($("body").addClass("page-sidebar-closed"),$(".page-sidebar-menu").addClass("page-sidebar-menu-closed")),$("body").on("click",".sidebar-toggler",function(t){var a=$(".page-sidebar"),n=$(".page-sidebar-menu");$(".sidebar-search",a).removeClass("open"),e.hasClass("page-sidebar-closed")?(e.removeClass("page-sidebar-closed"),n.removeClass("page-sidebar-menu-closed"),$.cookie&&$.cookie("sidebar_closed","0")):(e.addClass("page-sidebar-closed"),n.addClass("page-sidebar-menu-closed"),e.hasClass("page-sidebar-fixed")&&n.trigger("mouseleave"),$.cookie&&$.cookie("sidebar_closed","1")),$(window).trigger("resize")})},d=function(){$(".page-header").on("click",'.hor-menu a[data-toggle="tab"]',function(e){e.preventDefault();var t=$(".hor-menu .nav"),a=t.find("li.current");$("li.active",a).removeClass("active"),$(".selected",a).remove();var n=$(this).parents("li").last();n.addClass("current"),n.find("a:first").append('<span class="selected"></span>')}),$(".page-header").on("click",".search-form",function(e){$(this).addClass("open"),$(this).find(".form-control").focus(),$(".page-header .search-form .form-control").on("blur",function(e){$(this).closest(".search-form").removeClass("open"),$(this).unbind("blur")})}),$(".page-header").on("keypress",".hor-menu .search-form .form-control",function(e){return 13==e.which?($(this).closest(".search-form").submit(),!1):void 0}),$(".page-header").on("mousedown",".search-form.open .submit",function(e){e.preventDefault(),e.stopPropagation(),$(this).closest(".search-form").submit()}),$('[data-hover="megamenu-dropdown"]').not(".hover-initialized").each(function(){$(this).dropdownHover(),$(this).addClass("hover-initialized")}),$(document).on("click",".mega-menu-dropdown .dropdown-menu",function(e){e.stopPropagation()})},u=function(){$("body").on("shown.bs.tab",'a[data-toggle="tab"]',function(){n()})},p=function(){var e=300,t=500;navigator.userAgent.match(/iPhone|iPad|iPod/i)?$(window).bind("touchend touchcancel touchleave",function(a){$(this).scrollTop()>e?$(".scroll-to-top").fadeIn(t):$(".scroll-to-top").fadeOut(t)}):$(window).scroll(function(){$(this).scrollTop()>e?$(".scroll-to-top").fadeIn(t):$(".scroll-to-top").fadeOut(t)}),$(".scroll-to-top").click(function(e){return e.preventDefault(),$("html, body").animate({scrollTop:0},t),!1})},h=function(){$(".full-height-content").each(function(){var e,t=$(this);if(e=App.getViewPort().height-$(".page-header").outerHeight(!0)-$(".page-footer").outerHeight(!0)-$(".page-title").outerHeight(!0)-$(".page-bar").outerHeight(!0),t.hasClass("portlet")){var n=t.find(".portlet-body");App.destroySlimScroll(n.find(".full-height-content-body")),e=e-t.find(".portlet-title").outerHeight(!0)-parseInt(t.find(".portlet-body").css("padding-top"))-parseInt(t.find(".portlet-body").css("padding-bottom"))-5,App.getViewPort().width>=a&&t.hasClass("full-height-content-scrollable")?(e-=35,n.find(".full-height-content-body").css("height",e),App.initSlimScroll(n.find(".full-height-content-body"))):n.css("min-height",e)}else App.destroySlimScroll(t.find(".full-height-content-body")),App.getViewPort().width>=a&&t.hasClass("full-height-content-scrollable")?(e-=35,t.find(".full-height-content-body").css("height",e),App.initSlimScroll(t.find(".full-height-content-body"))):t.css("min-height",e)})};return{initHeader:function(){d()},setSidebarMenuActiveLink:function(e,t){o(e,t)},initSidebar:function(){s(),i(),c(),App.isAngularJsApp()&&o("match"),App.addResizeHandler(s)},initContent:function(){h(),u(),App.addResizeHandler(n),App.addResizeHandler(h)},initFooter:function(){p()},init:function(){this.initHeader(),this.initSidebar(),this.initContent(),this.initFooter()},fixContentHeight:function(){n()},initFixedSidebarHoverEffect:function(){l()},initFixedSidebar:function(){s()},getLayoutImgPath:function(){return App.getAssetsPath()+e},getLayoutCssPath:function(){return App.getAssetsPath()+t}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){Layout.init()}),function(){var e=angular.module("deviser.config",[]);e.config(function(e){e.appSettings.serviceBaseUrl="/api",e.appSettings.systemErrorMsg="Unexpected error has been occured, Please contact system administrator"}),e.provider("globals",function(){this.$get=function(){return{appSettings:e.appSettings}};var e=this;e.appSettings={serviceBaseUrl:"",systemErrorMsg:"",alertLifeTime:1e4}})}(),function(){function e(e,t,a,n,o,i,r,s,l,c,d,u,p){function h(e,t){{var a=$(e.currentTarget).scope().$parent;a.item.id}M(a.item)}function g(e,t,a){return a.sortOrder=t+1,a}function f(e,t){e.placeHolders.splice(t,1),M(e)}function m(e,t,a){return z(a),a}function v(e){("content"===e.layoutTemplate||"module"===e.layoutTemplate)&&(H.selectedItem=e)}function b(e){e.id=H.newGuid()}function y(e){var t=n.defer(),a=o.open({animation:!0,templateUrl:"contenttypes/"+e.type+".html",controller:"EditContentCtrl as ecVM",resolve:{contentInfo:function(){var t=e;return t}}});return a.result.then(function(e){t.resolve("data received!")},function(){t.reject(SYS_ERROR_MSG)}),t.promise}function C(){S().then(function(){n.all([w(),k(),x(),A()]).then(function(){T(),L(H.contentTypes)})})}function S(){var e=n.defer();return l.get(appContext.currentPageId).then(function(t){H.currentPage=t,e.resolve(t)},function(t){F("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function w(){var e=n.defer();return s.get(H.currentPage.layoutId).then(function(t){G=t,e.resolve("data received")},function(t){F("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function k(){var e=n.defer();return c.get().then(function(t){H.contentTypes=t,e.resolve("data received!")},function(t){F("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function x(){var e=n.defer();return u.get().then(function(t){var a=t;H.modules=[],_.each(a,function(e){H.modules.push({id:r.getGuid(),layoutTemplate:"module",type:"module",module:e})}),e.resolve("data received!")},function(e){F("error",SYS_ERROR_MSG),deferred.reject(SYS_ERROR_MSG)}),e.promise}function A(){var e=n.defer();return d.get(appContext.currentPageId,appContext.currentCulture).then(function(t){H.pageContents=t,e.resolve(t)},function(t){F("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function L(e){e&&_.each(e,function(e){e.id=r.getGuid(),e.layoutTemplate="content"})}function T(){var e=[],t=[];R(G.placeHolders),H.pageLayout=G,H.pageLayout.pageId=H.currentPage.id;var a=_.reject(H.pageContents,function(e){return _.contains(V,e.containerId)}),n=_.reject(H.currentPage.pageModule,function(e){return _.contains(V,e.containerId)});_.each(a,function(t){var a=(t.sortOrder-1,JSON.parse(t.typeInfo));e.push(a)}),_.each(n,function(e){var a=(e.sortOrder-1,{id:e.id,layoutTemplate:"module",type:"module",module:e.module});t.push(a)}),H.uaLayout.placeHolders=[],H.uaLayout.placeHolders=H.uaLayout.placeHolders.concat(e),H.uaLayout.placeHolders=H.uaLayout.placeHolders.concat(t)}function R(e){e&&_.each(e,function(e){V.push(e.id);var t=_.where(H.pageContents,{containerId:e.id});t&&_.each(t,function(t){var a=(t.sortOrder-1,JSON.parse(t.typeInfo));e.placeHolders.push(a)});var a=_.where(H.currentPage.pageModule,{containerId:e.id});a&&_.each(a,function(t){var a=(t.sortOrder-1,{id:t.id,layoutTemplate:"module",type:"module",module:t.module,sortOrder:t.sortOrder});e.placeHolders.push(a)}),e.placeHolders=_.sortBy(e.placeHolders,"sortOrder"),e.placeHolders&&R(e.placeHolders)})}function M(e){var t={contents:[],modules:[]};_.forEach(e.placeHolders,function(a,n){a.sortOrder=n+1,"content"===a.layoutTemplate?t.contents.push({element:a,containerId:e.id}):"module"===a.layoutTemplate&&t.modules.push({element:a,containerId:e.id})});var a=jQuery.extend(!0,{},H.pageLayout);P(a),console.log("--------------------------"),console.log("Layout only"),console.log(a),n.all([I(t),E(t),D(a)]).then(function(){F("success","Layout has been saved")})}function P(e){e.placeHolders=_.reject(e.placeHolders,function(e){return"content"===e.layoutTemplate||"module"===e.layoutTemplate}),_.forEach(e.placeHolders,function(e){e.placeHolders&&P(e)})}function I(e){var t=n.defer(),a=[];return _.each(e.contents,function(e){a.push({id:e.element.id,pageId:appContext.currentPageId,typeInfo:angular.toJson(e.element),containerId:e.containerId,sortOrder:e.element.sortOrder})}),d.putContents(a).then(function(e){console.log(e),t.resolve("page content updated")},function(e){console.log(e),t.reject(SYS_ERROR_MSG)}),t.promise}function E(e){var t=n.defer(),a=[];return _.each(e.modules,function(e){a.push({id:e.element.id,pageId:appContext.currentPageId,moduleId:e.element.module.id,containerId:e.containerId,sortOrder:e.element.sortOrder})}),p.putModules(a).then(function(e){console.log(e),t.resolve("page content updated")},function(e){t.reject(SYS_ERROR_MSG)}),t.promise}function D(e){var t=n.defer();return s.put(e).then(function(e){t.resolve("layout only updated")},function(e){F("error",SYS_ERROR_MSG),t.reject(SYS_ERROR_MSG)}),t.promise}function z(e){"content"===e.layoutTemplate?O(e.id):"module"===e.layoutTemplate&&Y(e.id)}function O(e){d.remove(e).then(function(e){console.log(e)},function(e){F("error",SYS_ERROR_MSG)})}function Y(e){p.remove(e).then(function(e){console.log(e)},function(e){F("error",SYS_ERROR_MSG)})}function F(e,a){H.message={messageType:e,content:a},t(function(){H.message={messageType:"",content:""}},i.appSettings.alertLifeTime)}var H=this,V=[];SYS_ERROR_MSG=i.appSettings.systemErrorMsg,H.alerts=[],H.pageLayout={},H.selectedItem={},H.deletedElements=[],H.layoutAllowedTypes=["container"],H.newGuid=r.getGuid,H.dropCallback=g,H.insertedCallback=h,H.itemMoved=f,H.deleteElement=m,H.selectItem=v,H.copyElement=b,H.editContent=y,H.uaLayout={};var G={};C()}function t(e,t,a,n,o){function i(){c.contentTranslation.id?(c.contentTranslation.cultureCode=appContext.currentCulture,n.put(c.contentTranslation).then(function(e){console.log(e),t.close("ok")},function(e){showMessage("error",SYS_ERROR_MSG)})):(c.contentTranslation.pageContentId=c.contentId,c.contentTranslation.cultureCode=appContext.currentCulture,n.post(c.contentTranslation).then(function(e){console.log(e),t.close("ok")},function(e){showMessage("error",SYS_ERROR_MSG)}))}function r(){t.dismiss("cancel")}function s(){l()}function l(){a.get(c.contentId).then(function(e){console.log(e);var t=_.findWhere(e.pageContentTranslation,{cultureCode:appContext.currentCulture});c.contentTranslation=t?t:{},c.typeInfo=JSON.parse(e.typeInfo)},function(e){showMessage("error",SYS_ERROR_MSG)})}var c=this;c.contentId=o.id,c.save=i,c.cancel=r,s()}var a=angular.module("deviserEdit",["ui.router","ui.bootstrap","dndLists","sd.sdlib","deviserLayout.services","deviser.config"]);a.controller("EditCtrl",["$scope","$timeout","$filter","$q","$modal","globals","sdUtil","layoutService","pageService","contentTypeService","pageContentService","moduleService","pageModuleService",e]),a.controller("EditContentCtrl",["$scope","$modalInstance","pageContentService","contentTranslationService","contentInfo",t])}(),function(){function e(e,t,a,n,o,i,r,s,l,c,d,u){function p(){n.all([h(),g(),f()]).then(function(){if(M.currentPage.layoutId){var e=_.find(M.layouts,function(e){return e.id===M.currentPage.layoutId});e?M.pageLayout=e:v()}m(M.layoutTypes)})}function h(){var e=n.defer();return s.get(appContext.currentPageId).then(function(t){M.currentPage=t,e.resolve("data received!")},function(t){R("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function g(){var e=n.defer();return r.get().then(function(t){console.log(t),t=_.where(t,{isDeleted:!1}),_.each(t,function(e){e&&!e.placeHolders&&(e.placeHolders=[])}),M.layouts=t,e.resolve("data received!")},function(t){R("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function f(){var e=n.defer();return l.get().then(function(t){M.layoutTypes=t,e.resolve("data received!")},function(t){R("error",SYS_ERROR_MSG),e.reject(SYS_ERROR_MSG)}),e.promise}function m(e){e&&_.each(e,function(e){e.id=i.getGuid(),e.placeHolders=[],e.layoutTemplate="column"===e.type?"column":"container"===e.type?"container":"row"===e.type?"row":"repeater"})}function v(){M.pageLayout={},M.pageLayout.id=0,M.pageLayout.name="",M.pageLayout.isChanged=!1,M.pageLayout.placeHolders=[]}function b(e){M.pageLayout=e,M.pageLayout.isChanged=!0,C(M.pageLayout.placeHolders)}function y(){M.pageLayout.id=0,M.pageLayout.name="",M.pageLayout.isChanged=!0}function $(){C(M.pageLayout.placeHolders),M.pageLayout.pageId=appContext.currentPageId,M.pageLayout.id>0?r.put(M.pageLayout).then(function(e){M.pageLayout.id=e.id,M.pageLayout.placeHolders=e.placeHolders,M.pageLayout.isChanged=!1,R("success","Layout has been saved")},function(e){R("error",SYS_ERROR_MSG)}):r.post(M.pageLayout).then(function(e){console.log(e),M.pageLayout.id=e.id,M.pageLayout.placeHolders=e.placeHolders,M.pageLayout.isChanged=!1,R("success","Layout has been saved"),g()},function(e){R("error",SYS_ERROR_MSG)})}function C(e){e&&_.each(e,function(e,t){console.log(e),e.sortOrder=t+1,e.placeHolders&&C(e.placeHolders)})}function S(){r.remove(M.pageLayout.id).then(function(e){console.log(e),R("success","Layout has been removed"),g(),v()},function(e){R("error",SYS_ERROR_MSG)})}function w(e,t,a){return console.log(a),t>0}function k(e,t,a){return a}function x(e,t,a){return a}function A(e,t){e.placeHolders.splice(t,1)}function L(e,t,a,n,o){var i=n?"External ":"";i+=o+" element is "+e+" position "+a,M.logEvent(i,t)}function T(e,t){console.log(e,"(triggered by the following",t.type,"event)"),console.log(t)}function R(e,a){M.message={messageType:e,content:a},t(function(){M.message={messageType:"",content:""}},o.appSettings.alertLifeTime)}var M=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,M.alerts=[],M.pageLayout={},M.selectedItem={},M.deletedElements=[],M.layoutAllowedTypes=["container"],M.newGuid=i.getGuid,M.dragoverCallback=w,M.dropCallback=k,M.logListEvent=L,M.logEvent=T,M.newLayout=v,M.selectLayout=b,M.copyLayout=y,M.saveLayout=$,M.deleteLayout=S,M.itemMoved=A,M.deleteElement=x,p()}var t=angular.module("deviserLayout",["ui.router","ui.bootstrap","dndLists","sd.sdlib","deviserLayout.services","deviser.config"]);t.controller("LayoutCtrl",["$scope","$timeout","$filter","$q","globals","sdUtil","layoutService","pageService","layoutTypeService","pageContentService","moduleService","pageModuleService",e])}(),function(){function e(e,t){function a(a,n,o,i,r,s){var l="edit_"+o.contentType;template=t.get(l),n.html(template),e(n.contents())(a)}function n(e,t){function a(){if(o.sdVM.ngModel&&o.sdVM.contentId){var e=_.find(o.sdVM.ngModel,function(e){return e.id===o.sdVM.contentId});e&&(n.content=e)}}var n=this,o=e;n.content||(n.content="Please enter the content"),n.edit=function(){n.isEditMode=!n.isEditMode},n.save=function(){n.content&&o.sdVM.contentId&&o.sdVM.containerId&&o.sdVM.onSave()(n.content,o.sdVM.contentId,o.sdVM.containerId),n.cancel()},n.cancel=function(){n.isEditMode=!n.isEditMode},e.$watch(function(){return o.sdVM.ngModel},function(e){console.log("Changed to "+e),a()})}var o={restrict:"A",controller:n,controllerAs:"sdVM",bindToController:!0,link:a,scope:{contentId:"@",containerId:"@",contentType:"@",ngModel:"=",onSave:"&"}};return o}function t(e){return{restrict:"A",require:"?ngModel",link:function(t,a,n,o){function i(){var e=a.html();n.stripBr&&"<br>"==e&&(e=""),o.$setViewValue(e)}o&&(o.$render=function(){a.html(e.getTrustedHtml(o.$viewValue||""))},a.on("blur keyup change",function(){t.$evalAsync(i)}),i())}}}function a(){function e(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}var t={getGuid:e};return t}var n=angular.module("sd.sdlib",["ngSanitize"]);n.directive("sdEdit",["$compile","$templateCache",e]),n.directive("contenteditable",["$sce",t]),n.factory("sdUtil",[a])}(),function(){function e(e,t,a){return m(e,t,a,"/layout")}function t(e,t,a){return m(e,t,a,"/page")}function a(e,t,a){return m(e,t,a,"/skin")}function n(e,t,a){return m(e,t,a,"/contenttype")}function o(e,t,a){return m(e,t,a,"/layouttype")}function i(e,t,a){function n(){var a=s;if(arguments[0]&&arguments[1]){var n=arguments[1],o=arguments[0];a=s+"/"+n+"/"+o}else if(arguments[0]){var i=arguments[0];a=s+"/"+i}var r=e({method:"GET",url:a});return r.then(b,function(e){return v(e,t)})}function o(a){var n=s+"/list",o=e({method:"PUT",url:n,data:angular.toJson(a)});return o.then(b,function(e){return v(e,t)})}var i="/pagecontent",r=m(e,t,a,i),s=a.appSettings.serviceBaseUrl+i;return r.get=n,r.putContents=o,r}function r(e,t,a){function n(){var a=r;if(arguments[0]&&arguments[1]){var n=arguments[1],o=arguments[0];a=r+"/"+n+"/"+o}else if(arguments[0]){var i=arguments[0];a=r+"/"+i}var s=e({method:"GET",url:a});return s.then(b,function(e){return v(e,t)})}var o="/contenttranslation",i=m(e,t,a,o),r=a.appSettings.serviceBaseUrl+o;return i.get=n,i}function s(e,t,a){var n=m(e,t,a,"/module");return n.put=null,n.post=null,n.remove=null,n}function l(e,t,a){function n(a){var n=i+"/list",o=e({method:"PUT",url:n,data:angular.toJson(a)});return o.then(b,function(e){return v(e,t)})}var o="/pagemodule",i=a.appSettings.serviceBaseUrl+o,r=m(e,t,a,o);return r.get=null,r.put=null,r.putModules=n,r}function c(e,t,a){var n=m(e,t,a,"/user");return n}function d(e,t,a){return m(e,t,a,"/user/isexist")}function u(e,t,a){return m(e,t,a,"/user/passwordreset")}function p(e,t,a){return m(e,t,a,"/role")}function h(e,t,a){function n(a,n){var o=e({method:"DELETE",url:r+"/"+a+"/"+n});return o.then(b,function(e){return v(e,t)})}var o="/user/role",i=m(e,t,a,o),r=a.appSettings.serviceBaseUrl+o;return i.remove=n,i}function g(e,t,a){function n(){var a=i+"/site",n=e({method:"GET",url:a});return n.then(b,function(e){return v(e,t)})}var o="/language",i=a.appSettings.serviceBaseUrl+o,r=m(e,t,a,o);return r.getSiteLanguages=n,r}function f(e,t,a){return m(e,t,a,"/file")}function m(e,t,a,n){function o(a){var n=c;a&&(n=c+"/"+a);var o=e({method:"GET",url:n});return o.then(b,function(e){return v(e,t)})}function i(a){var n=e({method:"POST",url:c,data:angular.toJson(a)});return n.then(b,function(e){return v(e,t)})}function r(a,n){var o=c;n&&(o=c+"/"+n);var i=e({method:"PUT",url:o,data:angular.toJson(a)});return i.then(b,function(e){return v(e,t)})}function s(a){var n=e({method:"DELETE",url:c+"/"+a});return n.then(b,function(e){return v(e,t)})}var l={get:o,put:r,post:i,remove:s},c=a.appSettings.serviceBaseUrl+n;return l}function v(e,t){return t.reject(angular.isObject(e.data)&&e.data?e.data:"An unknown error occurred.")}function b(e){return e.data}var y=angular.module("deviserLayout.services",["deviser.config"]);y.factory("layoutService",e),y.factory("pageService",t),y.factory("contentTypeService",n),y.factory("layoutTypeService",o),y.factory("pageContentService",i),y.factory("contentTranslationService",r),y.factory("moduleService",s),y.factory("pageModuleService",l),y.factory("skinService",a),y.factory("userService",c),y.factory("userExistService",d),y.factory("passwordResetService",u),y.factory("roleService",p),y.factory("userRoleService",h),y.factory("languageService",g),y.factory("fileService",f)}(),_.mixin({findDeep:function(e,t){function a(e){for(var a in t)if(!_.isUndefined(e)&&t[a]!==e[a])return!1;return!0}function n(e){var t;return _.forEach(e,function(e){return a(e)?(t=e,!1):((_.isObject(e)||_.isArray(e))&&(t=n(e)),t?!1:void 0)}),t}return n(e)}}),function(){function e(e,t,a,n,o,i){function r(){l()}function s(){}function l(){i.get().then(function(e){d.files=e},function(e){c("error","Cannot get all files and folders, please contact administrator")})}function c(e,a){d.message={messageType:e,content:a},t(function(){d.message={}},o.appSettings.alertLifeTime)}var d=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,d.alerts=[],d.upload=s,r()}var t=angular.module("deviser.filemanger",["ui.router","ui.bootstrap","ui.select","sd.sdlib","deviserLayout.services","deviser.config"]);

t.controller("FileManagerCtrl",["$scope","$timeout","$filter","$q","globals","fileService",e])}(),function(){function e(e,t,a,n,o,i){function r(){s(),l()}function s(){i.get().then(function(e){g.languages=e},function(e){h("error","Cannot get all languages, please contact administrator")})}function l(){i.getSiteLanguages().then(function(e){g.siteLanguages=e},function(e){h("error","Cannot get site languages, please contact administrator")})}function c(){g.currentViewState=g.viewStates.NEW}function d(){i.post(g.selectedLanguage).then(function(e){console.log(e),g.currentViewState=g.viewStates.LIST,g.selectedLanguage={},l(),h("success","New language has been added")},function(e){h("error","Cannot add language, please contact administrator")})}function u(e){i.put(e).then(function(e){console.log(e),l(),h("success","Role has been updated")},function(e){h("error","Cannot update role, please contact administrator")})}function p(){g.currentViewState=g.viewStates.LIST}function h(e,a){g.message={messageType:e,content:a},t(function(){g.message={}},o.appSettings.alertLifeTime)}var g=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,g.alerts=[],g.add=c,g.save=d,g.activate=u,g.cancel=p,g.viewStates={NEW:"NEW",LIST:"LIST"},g.currentViewState=g.viewStates.LIST,r()}var t=angular.module("deviser.language",["ui.router","ui.bootstrap","ui.select","sd.sdlib","deviserLayout.services","deviser.config"]);t.controller("LanguageCtrl",["$scope","$timeout","$filter","$q","globals","languageService",e])}(),function(){function e(e,t,a,n,o,i){function r(){i.get().then(function(e){g.roles=e},function(e){h("error","Cannot get all roles, please contact administrator")})}function s(){g.currentViewState=g.viewStates.NEW}function l(e){g.selectedRole=e,g.currentViewState=g.viewStates.EDIT}function c(e){i.remove(e.id).then(function(e){console.log(e),r(),g.currentViewState=g.viewStates.LIST,h("success","Role has been removed")},function(e){h("error","Cannot remove role, please contact administrator")})}function d(){e.roleForm.submitted=!0,g.currentViewState==g.viewStates.EDIT?e.editRoleForm.$valid&&i.put(g.selectedRole).then(function(e){console.log(e),r(),g.currentViewState=g.viewStates.LIST,h("success","Role has been updated")},function(e){h("error","Cannot update role, please contact administrator")}):g.currentViewState==g.viewStates.NEW&&e.roleForm.$valid&&i.post(g.newRole).then(function(e){console.log(e),g.currentViewState=g.viewStates.LIST,g.newRole={},r(),h("success","New role has been created")},function(e){h("error","Cannot create role, please contact administrator")})}function u(e,t,a){return e&&a?e[t].$dirty&&e[t].$error[a]||e.submitted&&e[t].$error[a]:e[t].$dirty&&e[t].$invalid||e.submitted&&e[t].$invalid}function p(){g.currentViewState=g.viewStates.LIST}function h(e,a){g.message={messageType:e,content:a},t(function(){g.message={}},o.appSettings.alertLifeTime)}var g=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,g.alerts=[],g.add=s,g.edit=l,g.remove=c,g.save=d,g.cancel=p,g.hasError=u,g.viewStates={NEW:"NEW",LIST:"LIST",EDIT:"EDIT"},g.currentViewState=g.viewStates.LIST,r()}var t=angular.module("deviser.securityRoles",["ui.router","ui.bootstrap","ui.tree","ngPasswordStrength","sd.sdlib","deviserLayout.services","deviser.config"]);t.controller("SecurityRolesCtrl",["$scope","$timeout","$filter","$q","globals","roleService",e])}(),function(){function e(e,t,a,n,o,i,r,s){function l(){A.currentLocale=appContext.currentCulture,c(),d(),u()}function c(){i.get().then(function(e){A.pages=[],A.pages.push(e),k(A.pages[0])},function(e){x("error","Cannot load pages, please contact administrator")})}function d(){r.get().then(function(e){A.skins=e},function(e){x("error","Cannot load skin, please contact administrator")})}function u(){s.getSiteLanguages().then(function(e){A.languages=e},function(e){x("error","Cannot get all languages, please contact administrator")})}function p(){var e=_.findWhere(A.selectedItem.pageTranslation,{locale:A.currentLocale}),t=_.findWhere(A.selectedItem.pageTranslation,{locale:A.siteLanguage});t=JSON.parse(angular.toJson(t)),e||(t.locale=A.currentLocale,t.name+=A.currentLocale.replace("-","").toLowerCase(),A.selectedItem.pageTranslation.push(t))}function h(e,t){e.preventDefault(),e.stopPropagation(),t.opened=!0}function g(e,t,a){var n=t&&t.depth()>0;return n}function f(e){var t=e.source.nodeScope.page,a=e.dest.nodesScope.page;t&&a&&(t.parentId=a.id,t.pageLevel=e.dest.nodesScope.depth(),w(A.pages[0]),S())}function m(e){if(e){var t=e.id;i.remove(t).then(function(t){e.isDeleted=!0,x("success","Page has been removed")},function(e){x("error","'Cannot remove page, please contact administrator")})}}function v(e){e.toggle()}function b(e){A.currentLocale=A.siteLanguage,A.selectedItem=e}function y(e){var t={parentId:e.id,childPage:[],pageLevel:e.pageLevel+1,pageTranslation:[{locale:A.currentLocale,name:"",url:"",title:null,description:null,keywords:null}]};i.post(t).then(function(t){e.childPage||(e.childPage=[]),e.childPage.push(t),x("success","Page created successfully")},function(e){x("error","'Cannot update page, please contact administrator")})}function $(){A.selectedItem&&C(A.selectedItem)}function C(e){i.put(e,e.id).then(function(e){x("success","Page updated successfully")},function(e){x("error","'Cannot update page, please contact administrator")})}function S(){i.put(A.pages[0]).then(function(e){x("success","All pages updated successfully")},function(e){x("error","'Cannot update all pages, please contact administrator")})}function w(e){e&&e.childPage&&_.each(e.childPage,function(e,t){e.pageOrder=t+1,w(e)})}function k(e){e&&(e.childPage?(e.childPage=_.sortBy(e.childPage,function(e){return e.pageOrder}),_.each(e.childPage,function(e,t){k(e)})):e.childPage=[])}function x(e,a){A.message={messageType:e,content:a},t(function(){A.message={}},o.appSettings.alertLifeTime)}var A=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,A.alerts=[],A.pages=[],A.selectedItem={},A.liveTill={},A.liveFrom={},A.options={accept:g,dropped:f},A.dateFormat="dd.MM.yyyy",A.openDatePicker=h,A.dateOptions={formatYear:"yy",startingDay:1},A.disabledDatePicker=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())},e.$watch(function(){return A.pages},function(){A.isChanged=!0},!0),A["delete"]=m,A.toggle=v,A.selectCurrent=b,A.newSubPage=y,A.changeLanguage=p,A.save=$,A.siteLanguage="en-US",l()}var t=angular.module("deviser.pageMangement",["ui.router","ui.bootstrap","ui.tree","ui.select","sd.sdlib","deviserLayout.services","deviser.config"]);t.controller("PageManagementCtrl",["$scope","$timeout","$filter","$q","globals","pageService","skinService","languageService",e]),t.filter("selectLanguage",function(){return function(e,t){return e&&t?_.filter(e,function(e){return e.locale===t}):e}})}(),function(){function e(e,t,a,n,o,i,r,s,l,c){function d(){i.get().then(function(e){x.users=e},function(e){w("error","Cannot get users, please contact administrator")})}function u(){l.get().then(function(e){x.roles=k=e},function(e){w("error","Cannot get roles, please contact administrator")})}function p(){x.currentViewState=x.viewStates.NEW}function h(e){x.selectedUser=e,v(),x.currentViewState=x.viewStates.EDIT}function g(e){i.remove(e.id).then(function(e){console.log(e),d(),w("success","User has been removed")},function(e){w("error","Cannot remove the user, please contact administrator")})}function f(){var e={userId:x.selectedUser.id,roleName:x.selectedRole.name};c.post(e).then(function(e){x.selectedUser=e,v()},function(e){w("error","Cannot add role, please contact administrator")})}function m(e){var t={userId:x.selectedUser.id,roleName:e.name};c.remove(t.userId,t.roleName).then(function(e){x.selectedUser=e,v()},function(e){w("error","Cannot remove role, please contact administrator")})}function v(){x.selectedUser&&(x.roles=_.reject(k,function(e){return _.findWhere(x.selectedUser.roles,{id:e.id})}))}function b(){e.userForm.submitted=!0,x.currentViewState==x.viewStates.EDIT?e.editUserForm.$valid&&i.put(x.selectedUser).then(function(e){console.log(e),x.currentViewState=x.viewStates.LIST,w("success","Profile has been updated")},function(e){w("error","Cannot update user, please contact administrator")}):x.currentViewState==x.viewStates.NEW&&e.userForm.$valid&&!x.isUserExist&&i.post(x.newUser).then(function(e){console.log(e),x.currentViewState=x.viewStates.LIST,x.newUser={},d(),w("success","New user has been created")},function(e){if(e.errors){var t="";_.each(e.errors,function(e){t+=e.description}),w("error",t)}else w("error","Cannot update user, please contact administrator")})}function y(){e.passwordResetForm.submitted=!0,e.passwordResetForm.$valid&&(x.passwordReset.userId=x.selectedUser.id,s.post(x.passwordReset).then(function(e){if(console.log(e),e&&e.succeeded===!0)x.currentViewState=x.viewStates.LIST,x.passwordReset={},d(),w("success","Password has been reset");else if(e.errors){var t="";_.each(e.errors,function(e){t+=e.description}),w("error",t)}else w("error","Cannot reset password, please contact administrator")},function(e){w("error","Cannot reset password, please contact administrator")}))}function $(e,t,a){return e&&a?e[t].$dirty&&e[t].$error[a]||e.submitted&&e[t].$error[a]:e[t].$dirty&&e[t].$invalid||e.submitted&&e[t].$invalid}function C(){x.currentViewState=x.viewStates.LIST}function S(t){if(!e.userForm.email.$error.email&&t){var a={userName:t};r.post(a).then(function(e){x.isUserExist=e},function(e){w("error","Cannot check email address, please contact administrator")})}}function w(e,a){x.message={messageType:e,content:a},t(function(){x.message={}},o.appSettings.alertLifeTime)}var k,x=this;SYS_ERROR_MSG=o.appSettings.systemErrorMsg,x.alerts=[],x.add=p,x.edit=h,x.remove=g,x.save=b,x.cancel=C,x.checkUserExist=S,x.resetPassword=y,x.addRole=f,x.removeRole=m,x.hasError=$,x.viewStates={NEW:"NEW",LIST:"LIST",EDIT:"EDIT"},x.isUserExist=!0,x.currentViewState=x.viewStates.LIST,d(),u()}var t=angular.module("deviser.userManagement",["ui.router","ui.bootstrap","ui.tree","ui.select","ngSanitize","sd.sdlib","deviserLayout.services","deviser.config"]);t.controller("UserManagementCtrl",["$scope","$timeout","$filter","$q","globals","userService","userExistService","passwordResetService","roleService","userRoleService",e])}();